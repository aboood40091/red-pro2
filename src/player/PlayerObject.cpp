#include <actor/Profile.h>
#include <event/EventDie.h>
#include <event/EventPlayerChange.h>
#include <game/CourseTask.h>
#include <player/PlayerObject.h>

static const ActorCreateInfo cActorCreateInfo_PlayerObject = { 0, 0, { 0, 16, 12, 16 } };
static const Profile cProfile_PlayerObject(TActorFactory<PlayerObject>, ProfileInfo::cProfileID_PlayerObject, "プレイヤーオブジェクト", &cActorCreateInfo_PlayerObject);

PlayerObject::PlayerObject(const ActorCreateParam& param)
    : PlayerBase(param)
    , mModelMgr(getParamPlayerModelType(mParam0), PlayerModelBase::cSceneType_Course, getParamPlayerNo(mParam0))
    , _2760()
    , mModePrev(cPlayerMode_Small)
    , mModeNext(cPlayerMode_Small)
    , _2774(0.0f, 0.0f)
    , mStarTimer(0)
    , mStarCnt(0)
    , mCarryActorID(0)
    , mCarryStep(cCarryStep_None)
    , mCarryStepPrev(cCarryStep_None)
    , mCarryStepTimer(0.0f)
    , mCarryStepLength(0.0f)
    , _2798()
    , _27a4()
    , _27b0()
    , _27b8()
    , _27c0(mPos)
    , _27cc(0)
    , mScrollMode(1)
    , mPropelParts()
    , mLight()
    , _2998(0)
    , _299c(0)
    , _29a0(0)
    , mpEventPlayerChange(new EventPlayerChange(getParamPlayerNo(mParam0)))
    , mChangeMgr()
    , _29d0(0.0f)
    , _29d4(0)
    , mpEventDie(new EventDie(getParamPlayerNo(mParam0)))
    , _29dc(0)
    , mPlayerEatDieNow(false)
    , _29e0(0.0f, 0.0f, 0.0f)
    , mEffectScale(1.0f)
    , mDokanCannonType(cDokanCannonType_ShootUp)
    , mDemoInBossMoveTarget(0.0f, 0.0f)
    , mPMusaTransformStep(0)
    , _2a00(cDirType_Right)
    , _2a04(false)
    , _2a08(0)
    , _2a0c(0)
    , _2a10(0)
    , _2a14(0)
    , mWhichJump(0)
    , _2a1c(0)
    , _2a20(0)
    , _2a24(0)
    , _2a28(0)
    , mSpinRotStep()
    , mMissSpinAngle()
    , _2a34(0)
    , _2a38(0)
    , _2a3c(0.0f)
    , _2a40(0)
    , _2a44(0)
    , _2a48(0.0f)
    , mWallSlideDir(cDirType_Right)
    , mLiftUpActorID()
    , _2a54(0.0f)
    , _2a58(1.0f)
    , _2a5c(0)
    , _2a60(0)
    , _2a64(0.0f)
    , _2a68(0)
    , _2a6c(0)
    , _2a70(0)
    , _2a74(0)
    , _2a78(0)
    , _2a7c(0)
    , _2a80(0)
    , _2a84(0)
    , _2a88(0)
    , _2a8c(0)
    , mBalloonControllerConnectStatus(0)
    , _2a94(0)
    , _2a98(0.0f, 0.0f, 0.0f)
    , mCannonType(0)
    , _2aa8(0)
    , _2aac(0.0f, 0.0f, 0.0f)
    , _2ab8(0.0f)
    , _2abc(0.0f)
    , _2ac0(0)
    , _2ac4()
    , _2ac8(0)
    , _2acc(0)
    , _2ad0()
    , _2b38(0)
    , _2b3c(0.0f, 0.0f)
    , _2b44(0)
    , _2b48(0)
    , _2b4c(0)
    , _2b50(0)
    , _2b54(0)
    , _2b58(0)
    , _2b5c(0.0f)
    , _2b60(0.0f, 0.0f)
    , _2b68(0)
    , _2b6c(0.0f)
    , _2b70(0.0f)
    , _2b74(0)
    , _2b78(0)
    , mPropelActionSubTimer(0)
    , mPropelFlyTime(false)
    , _2b80(0)
    , _2b84(0)
    , mPropelFallSpinEffect()
    , _2bf0()
    , _2c58()
    , mSpinHipAttackEffect()
    , _2cc4(0)
    , _2cc8(0)
    , mPlyIceActorID()
    , mQuakeMode()
    , mQuakeRumbleTimer(0)
    , _2cd8(0.0f)
    , _2cdc(false)
    , _2ce0(0)
    , _2ce4(0)
    , mPenguinSwimFlag()
    , mTarzanRopeBgType(0)
    , _2cf0(0.0f)
    , _2cf4(0)
    , _2cf8(0)
    , _2cfc(0)
    , mRopeAngleNow()
    , mRopeAngleDiffNow()
    , mRopeAngleOld()
    , mRopeAngleDiffOld()
    , _2d10(0)
    , mMameWallWalkSpeed(0.0f)
    , _2d18(0.0f, 0.0f)
    , _2d20()
    , _2d24()
    , _2d28(0)
    , mKaniPosY(0.0f)
    , _2d30(false)
    , mMusaJumpStep(0)
    , _2d38(0.0f)
    , _2d3c(0.0f)
    , _2d40()
    , _2d44()
    , mMusaStartWallSlide(false)
    , mMusaCanDoJump(false)
    , _2d4a(0)
    , _2d4c(0)
    , _2d50()
    , mMusaFlyStep(0)
    , mEatData(mActorUniqueID)
    , mEatPosOffset(0.0f, 0.0f)
    , _2d84(false)
    , mEatPosReserve(0.0f, 0.0f)
    , _2d90(cDirType_Left)
    , mPlayerHangChildActorID()
    , mPlayerHangParentActorID()
    , _2d9c(0)
    , mJrCrownMtx()
    , _2dd0(0)
    , mQuakeTimer(0)
    , mQuakeEffectFlag(false)
    , mItemGetEffect1()
    , mItemGetEffect2()
    , mPowerUpEffect()
    , mSwimEffect()
    , mPaddleSwimEffectL()
    , mPaddleSwimEffectR()
    , _2fd4()
    , _303c()
    , mSpinJumpEffect()
    , mMissSpinJumpEffect()
    , _3124()
    , mMusaFlyEffect()
    , mMusaFlyUpEffectIndex(0)
    , mMusaFlyUpEffectDoubleBuffer()
    , mStarEffectStep(0)
    , mStarEffect()
    , mPMusaEffectStep(0)
    , mPMusaEffect()
    , mPMusaFlyEffectStep(0)
    , mPMusaFlyEffect()
    , _340c(0)
    , _3410(0)
    , _3414()
    , mOrchestra()
    , _3490(0)
    , _3494(0)
    , _3498()
    , _34a4()
    , mIdleCounter(0)
    , _34ac(0)
    , _34b0()
    , _34c4(false)
    , _34c5(false)
    , mJumpAnmRate(0.0f)
    , mJumpTimerF(0.0f)
    , mJumpAnmID(PlayerAnmID::cInvalid)
    , _34d4(10)
{
    _2798.fill(0);
    _27a4.fill(0);
    _34b0.fill(0);
    _3498.fill(0);

    mCharacter = getParamPlayerCharacter(mParam0);
    mDirection = getParamPlayerFacingDir(mParam0);
    mMode = getParamPlayerMode(mParam0);
    mPlayerNo = getParamPlayerNo(mParam0);

    mPlayerKey.setPlayerNo(mPlayerNo);

    mpModelBaseMgr = &mModelMgr;

    setKind(cActorType_Player);

    const FieldPlayerData* p_player_data = CourseTask::instance()->getPlayerData(mPlayerNo);
    if (p_player_data != nullptr)
        mModelMgr.setMiiCapVisible(p_player_data->mii_cap_visible);

    mPriority = mPlayerNo;
}
